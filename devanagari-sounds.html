<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Devanagari Pronunciation Tool</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body { font-family: system-ui, Arial, sans-serif; padding: 16px; }
    h1 { font-size: 20px; margin: 0 0 10px; }
    h2 { font-size: 16px; margin: 14px 0 8px; }

    .row { display:flex; gap:10px; align-items:center; flex-wrap: wrap; margin: 10px 0 14px; }
    label { font-size: 14px; color:#444; }
    select { padding: 6px 8px; border-radius: 10px; border: 1px solid #ddd; background: white; }

    .pill { font-size: 13px; padding: 6px 10px; border-radius: 999px; border: 1px solid #ddd; background:#fafafa; }
    .small { font-size: 13px; color:#666; margin-top: 10px; }

    .grid { display: grid; grid-template-columns: repeat(8, minmax(54px, 1fr)); gap: 10px; max-width: 900px; }
    .grid5 { display:grid; grid-template-columns: repeat(5, minmax(54px, 1fr)); gap: 10px; max-width: 520px; }
    .line { display:flex; gap:10px; flex-wrap: wrap; max-width: 900px; }

    .letterBtn{
      font-family: "Noto Sans Devanagari","Nirmala UI","Mangal",system-ui,sans-serif;
      font-size: 26px;
      padding: 10px 0;
      border-radius: 12px;
      border: 1px solid #ddd;
      background: white;
      cursor: pointer;
      box-shadow: 0 1px 2px rgba(0,0,0,.06);
      user-select:none;
    }
    .letterBtn:active { transform: scale(0.98); }

    /* ---------- GUNITA COLOR SYSTEM (color-blind friendly) ---------- */

    /* Gunita consonants: neutral */
    #gunita-consonants .letterBtn {
      background: #ffffff;
      border-color: #cfcfcf;
    }

    /* Gunita matras: blue theme */
    #gunita-matras .letterBtn {
      background: #e7f1ff;
      border-color: #2b6cb0;
    }

    /* Inherent vowel (अ): gray, not blue */
    #gunita-matras .letterBtn[data-matra="a"] {
      background: #f3f4f6;
      border-color: #6b7280;
    }

    /* Large combined result */
    #gunita-display {
      font-family: "Noto Sans Devanagari","Nirmala UI","Mangal",system-ui,sans-serif;
      font-size: 64px;
      line-height: 1.05;
      padding: 16px 28px;
      border-radius: 18px;
      background: #fff7e6;
      border: 2px solid #b45309;
      color: #0f172a;
      min-width: 160px;
      text-align: center;
      position: relative;
    }

    /* Accent bar (non-color cue) */
    #gunita-display::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 10px;
      height: 100%;
      background: #b45309;
      border-top-left-radius: 18px;
      border-bottom-left-radius: 18px;
    }
  </style>
</head>

<body>
  <h1>Devanagari Pronunciation Tool</h1>

  <h2>स्वराः</h2>
  <div class="grid" id="grid-vowels"></div>

  <h2>वर्गीय व्यञ्जनानि</h2>
  <div class="grid5" id="grid-vargiya"></div>

  <h2>अवर्गीय व्यञ्जनानि</h2>
  <div class="line" id="line-avargiya"></div>

  <h2>गुणित अक्षराणि <span class="small">(Work in progress)</span></h2>

  <div class="row">
    <span class="pill">1) Pick a consonant → 2) Pick a vowel/mātrā</span>
    <span class="pill" id="gunita-status">Selected: —</span>
  </div>

  <div class="line" id="gunita-consonants"></div>
  <div class="line" id="gunita-matras"></div>

  <div class="row">
    <div id="gunita-display">—</div>
  </div>

  <p class="small">Developed by Samskritabharati USA</p>

  <script>
    const AUDIO_BASE_URL = "https://laksiyer.github.io/ucchAraNam/audio/";

    const vargiya = [
      { deva:"क", file:"ka.mp3" }, { deva:"ख", file:"kha.mp3" }, { deva:"ग", file:"ga.mp3" },
      { deva:"घ", file:"gha.mp3" }, { deva:"ङ", file:"nga.mp3" },
      { deva:"च", file:"ca.mp3" }, { deva:"छ", file:"cha.mp3" }, { deva:"ज", file:"ja.mp3" },
      { deva:"झ", file:"jha.mp3" }, { deva:"ञ", file:"nya.mp3" },
      { deva:"ट", file:"ta_retro.mp3" }, { deva:"ठ", file:"tha_retro.mp3" },
      { deva:"ड", file:"da_retro.mp3" }, { deva:"ढ", file:"dha_retro.mp3" }, { deva:"ण", file:"na_retro.mp3" },
      { deva:"त", file:"ta.mp3" }, { deva:"थ", file:"tha.mp3" }, { deva:"द", file:"da.mp3" },
      { deva:"ध", file:"dha.mp3" }, { deva:"न", file:"na.mp3" },
      { deva:"प", file:"pa.mp3" }, { deva:"फ", file:"pha.mp3" }, { deva:"ब", file:"ba.mp3" },
      { deva:"भ", file:"bha.mp3" }, { deva:"म", file:"ma.mp3" }
    ];

    const avargiya = [
      { deva:"य", file:"ya.mp3" }, { deva:"र", file:"ra.mp3" }, { deva:"ल", file:"la.mp3" },
      { deva:"व", file:"va.mp3" }, { deva:"श", file:"sha_palatal.mp3" },
      { deva:"ष", file:"sha_retro.mp3" }, { deva:"स", file:"sa.mp3" }, { deva:"ह", file:"ha.mp3" }
    ];

    const matras = [
      { key:"a", deva:"", vowelFile:"a.mp3" },
      { key:"aa", deva:"ा", vowelFile:"aa.mp3" },
      { key:"i", deva:"ि", vowelFile:"i.mp3" },
      { key:"ii", deva:"ी", vowelFile:"ii.mp3" },
      { key:"u", deva:"ु", vowelFile:"u.mp3" },
      { key:"uu", deva:"ू", vowelFile:"uu.mp3" },
      { key:"ri", deva:"ृ", vowelFile:"ri.mp3" },
      { key:"rri", deva:"ॄ", vowelFile:"rri.mp3" },
      { key:"lr", deva:"ॢ", vowelFile:"lr.mp3" },
      { key:"e", deva:"े", vowelFile:"e.mp3" },
      { key:"ai", deva:"ै", vowelFile:"ai.mp3" },
      { key:"o", deva:"ो", vowelFile:"o.mp3" },
      { key:"au", deva:"ौ", vowelFile:"au.mp3" },
      { key:"am", deva:"ं", vowelFile:"am.mp3" },
      { key:"ah", deva:"ः", vowelFile:"ah.mp3" }
    ];

    const player = new Audio();
    let selectedConsonant = null;

    async function playSequence(files) {
      for (const f of files) {
        await new Promise(resolve => {
          player.src = AUDIO_BASE_URL + f;
          player.onended = resolve;
          player.play();
        });
      }
    }

    const gunitaStatus = document.getElementById("gunita-status");
    const gunitaDisplay = document.getElementById("gunita-display");

    const cDiv = document.getElementById("gunita-consonants");
    const mDiv = document.getElementById("gunita-matras");

    [...vargiya, ...avargiya].forEach(c => {
      const b = document.createElement("button");
      b.className = "letterBtn";
      b.textContent = c.deva;
      b.onclick = () => {
        selectedConsonant = c;
        gunitaStatus.textContent = "Selected: " + c.deva;
        gunitaDisplay.textContent = c.deva;
        player.src = AUDIO_BASE_URL + c.file;
        player.play();
      };
      cDiv.appendChild(b);
    });

    matras.forEach(m => {
      const b = document.createElement("button");
      b.className = "letterBtn";
      b.dataset.matra = m.key;
      b.textContent = m.deva || "अ";
      b.onclick = async () => {
        if (!selectedConsonant) return alert("Select a consonant first");
        const combined = selectedConsonant.deva + (m.deva || "");
        gunitaDisplay.textContent = combined;
        await playSequence([selectedConsonant.file, m.vowelFile]);
      };
      mDiv.appendChild(b);
    });
  </script>
</body>
</html>
